4620
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15.1" />
		<meta name="keywords" content="OpenBGPD,BGP,OpenVPN,Pf,Quagga,IPsec" />
		<link rel="alternate" type="application/x-wiki" title="Edit" href="/w/index.php?title=OpenBGPD&amp;action=edit" />
		<link rel="edit" title="Edit" href="/w/index.php?title=OpenBGPD&amp;action=edit" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Telecomix Crypto Munitions Bureau (en)" />
		<link title="Creative Commons" type="application/rdf+xml" href="/w/index.php?title=OpenBGPD&amp;action=creativecommons" rel="meta" />
		<link rel="copyright" href="http://creativecommons.org/licenses/publicdomain/" />
		<link rel="alternate" type="application/rss+xml" title="Telecomix Crypto Munitions Bureau RSS Feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="Telecomix Crypto Munitions Bureau Atom Feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>OpenBGPD - Telecomix Crypto Munitions Bureau</title>
		<link rel="stylesheet" href="/w/skins/common/shared.css?207" type="text/css" media="screen" />
		<link rel="stylesheet" href="/w/skins/common/commonPrint.css?207" type="text/css" media="print" />
		<link rel="stylesheet" href="/w/skins/monobook/main.css?207" type="text/css" media="screen" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="/w/skins/monobook/IE50Fixes.css?207" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="/w/skins/monobook/IE55Fixes.css?207" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="/w/skins/monobook/IE60Fixes.css?207" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="/w/skins/monobook/IE70Fixes.css?207" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" type="text/css" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" type="text/css" media="print" />
		<link rel="stylesheet" href="/w/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" type="text/css" />
		<link rel="stylesheet" href="/w/index.php?title=-&amp;action=raw&amp;maxage=18000&amp;gen=css" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="/w/skins/common/IEFixes.js?207"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/w/skins";
		var wgArticlePath = "/wiki/$1";
		var wgScriptPath = "/w";
		var wgScript = "/w/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "https://cryptoanarchy.org";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "OpenBGPD";
		var wgTitle = "OpenBGPD";
		var wgAction = "view";
		var wgArticleId = "28";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = 896;
		var wgVersion = "1.15.1";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="/w/skins/common/wikibits.js?207"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/w/skins/common/ajax.js?207"></script>
		<script type="text/javascript" src="/w/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-OpenBGPD skin-monobook">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 id="firstHeading" class="firstHeading">OpenBGPD</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Telecomix Crypto Munitions Bureau</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p>OpenBGPD is a nice program that comes with OpenBSD, and can be installed in FreeBSD. Maybe some other operating systems also support it.
</p><p>It can be used to do nice dynamic routing in a darknet&nbsp;:) The <a href="/wiki/BGP" title="BGP">BGP</a> protocol is used by ISPs and other network providers to exchange routes with each other. Each BGP router has its own Autonomous System Number (ASN) and each ISP is its own <a href="http://en.wikipedia.org/wiki/Autonomous_system_(Internet)" class="external text" title="http://en.wikipedia.org/wiki/Autonomous_system_(Internet)" rel="nofollow">Autonomous System</a> (AS).
</p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Why_use_OpenBGP.3F"><span class="tocnumber">1</span> <span class="toctext">Why use OpenBGP?</span></a></li>
<li class="toclevel-1"><a href="#Be_paranoid_lol.3F"><span class="tocnumber">2</span> <span class="toctext">Be paranoid lol?</span></a></li>
<li class="toclevel-1"><a href="#Example_script_to_exchange_routes_with_a_single_AS"><span class="tocnumber">3</span> <span class="toctext">Example script to exchange routes with a single AS</span></a></li>
<li class="toclevel-1"><a href="#bgpctl"><span class="tocnumber">4</span> <span class="toctext">bgpctl</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Why_use_OpenBGP.3F" id="Why_use_OpenBGP.3F"></a><h3><span class="editsection">[<a href="/w/index.php?title=OpenBGPD&amp;action=edit&amp;section=1" title="Edit section: Why use OpenBGP?">edit</a>]</span> <span class="mw-headline"> Why use OpenBGP? </span></h3>
<ul><li> Atomic reload of config files (Cisco and <a href="/w/index.php?title=Quagga&amp;action=edit&amp;redlink=1" class="new" title="Quagga (page does not exist)">Quagga</a> does not support this, afaik, they might flip the fuck out from normal usage)
</li><li> Hm, i think it is rather secure. The OpenBSD people are good at this lol&nbsp;:)
</li><li> It scales well with large networks (but who cares, as long as we do not build a trillion-node-large network this will not affect us.)
</li></ul>
<a name="Be_paranoid_lol.3F" id="Be_paranoid_lol.3F"></a><h3><span class="editsection">[<a href="/w/index.php?title=OpenBGPD&amp;action=edit&amp;section=2" title="Edit section: Be paranoid lol?">edit</a>]</span> <span class="mw-headline"> Be paranoid lol? </span></h3>
<p>Make sure that only the BGP routers you trust can contact you. Use <a href="/wiki/Pf" title="Pf">pf</a> to firewall tcp port 179. If you fail at this others <i>might</i> be able to change stuff in your routing table, which means that you fail. Do not send the traffic in clear text. Use <a href="/wiki/OpenVPN" title="OpenVPN">OpenVPN</a> or <a href="/w/index.php?title=IPsec&amp;action=edit&amp;redlink=1" class="new" title="IPsec (page does not exist)">IPsec</a>.
</p>
<a name="Example_script_to_exchange_routes_with_a_single_AS" id="Example_script_to_exchange_routes_with_a_single_AS"></a><h3><span class="editsection">[<a href="/w/index.php?title=OpenBGPD&amp;action=edit&amp;section=3" title="Edit section: Example script to exchange routes with a single AS">edit</a>]</span> <span class="mw-headline"> Example script to exchange routes with a single AS </span></h3>
<p>The config is saved in <b>/etc/bgpd.conf</b> and the daemon can be controlled with <b>bgpctl</b>. If you make changes in the config you can make the daemon reload its config file by typing <font face="monospace">bgpctl reload</font>.
</p><p>For more information:
</p>
<pre>
man bgpd.conf
</pre>
<p><b>What this does:</b>
</p>
<ul><li> You have ASN 9999
</li><li> Peers with AS 12345, that is located at 9.9.9.9
</li><li> Does only accept routes belonging to 1.0.0.0/8
</li><li> You are broadcasting that you have networks 1.2.3.0/24 and 1.2.4.0/24
</li><li> It will update your routing table automagically (type "route -n show -inet" to see your IPv4 routing table)
</li></ul>
<pre>
AS 9999                             # your ASN
router-id 1.2.4.1                   # your router ID should be an IP address you own
holdtime 30                         # default is 180 sec, this will make your router drop routes quicker
#listen on 1.2.4.1                  # which IP address you are listening on (commented out - use pf to block instead?)

network 1.2.3.0/24                  # you own two networks, 1.2.3.0/24 and 1.2.4.0/24
network 1.2.4.0/24

depend on tun0                      # the daemon should only do stuff when tun0 is up
                                    # (do not try to contact your peer if the darknet link goes down)

remote-as 12345                     # you want to connect to AS 12345
neighbor 9.9.9.9 {                  # you want to connect to 9.9.9.9
   descr your-frind-in-cipherspace  # description lol
   announce all                     # send all your networks to your friend (1.2.3.0/24 and 1.2.4.0/24)
   }

deny from any                                           # deny everything
allow from any prefix 1.0.0.0/8 prefixlen 10 - 30       # allow everyone to send you routes belonging to 1.0.0.0/8
                                                        # prefixlen 10-32 means that CIDR numbers 10-30 are allowed
                                                        # (CIDR is the number after the slash, i.e. blabla/19 is allowed)

# I dont think these are need, but their presence makes me feel safe&nbsp;:)
deny from any prefix 10.0.0.0/8 prefixlen &gt;= 8          # Local LAN addresses
deny from any prefix 172.16.0.0/12 prefixlen &gt;= 12      # Local LAN addresses
deny from any prefix 192.168.0.0/16 prefixlen &gt;= 16     # Local LAN addresses
deny from any prefix 169.254.0.0/16 prefixlen &gt;= 16     # Autoconfiguration stuff
deny from any prefix 192.0.2.0/24 prefixlen &gt;= 24       # i have no idea
deny from any prefix 224.0.0.0/4 prefixlen &gt;= 4         # broadcast
deny from any prefix 240.0.0.0/4 prefixlen &gt;= 4         # should not be used anywhere, reserved
</pre>
<a name="bgpctl" id="bgpctl"></a><h3><span class="editsection">[<a href="/w/index.php?title=OpenBGPD&amp;action=edit&amp;section=4" title="Edit section: bgpctl">edit</a>]</span> <span class="mw-headline"> bgpctl </span></h3>
<p>bgpctl is a nice program that can be used to control your BGP router.
</p>
<pre>
bgpctl reload                 - atomic reload of bgpd.conf without taking your node offline, does not load the file if errors are found
bgpctl show                   - shows simple statistics from your connected AS friends
bgpctl network show           - shows all networks that has been announced (this can be a loooooooooooooong list)
bgpctl network show inet6     - shows IPv6 networks (yeah, OpenBGP should be able to handle IPv6 routing too.)
bgpctl show interfaces        - lists your interfaces
</pre>
<p><b>man bgpctl</b> for more info&nbsp;:)?
</p>
<!-- 
NewPP limit report
Preprocessor node count: 15/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key cryptoanarchy_wiki:pcache:idhash:28-0!1!0!!en!2 and timestamp 20121020022719 -->
<div class="printfooter">
Retrieved from "<a href="https://cryptoanarchy.org/wiki/OpenBGPD">https://cryptoanarchy.org/wiki/OpenBGPD</a>"</div>
						<!-- end content -->
						<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/OpenBGPD" title="View the content page [c]" accesskey="c">Page</a></li>
				 <li id="ca-talk" class="new"><a href="/w/index.php?title=Talk:OpenBGPD&amp;action=edit&amp;redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-edit"><a href="/w/index.php?title=OpenBGPD&amp;action=edit" title="You can edit this page.&#10;Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				 <li id="ca-history"><a href="/w/index.php?title=OpenBGPD&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=OpenBGPD" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(/w/tcmb.png);" href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/wiki/Main_Page">Main Page</a></li>
				<li id="n-portal"><a href="/wiki/Telecomix_Crypto_Munitions_Bureau:Community_Portal" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-currentevents"><a href="/wiki/Telecomix_Crypto_Munitions_Bureau:Current_events" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="/wiki/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="/wiki/Help:Contents" title="The place to find out">Help</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/w/index.php" id="searchform"><div>
				<input type='hidden' name="title" value="Special:Search"/>
				<input id="searchInput" name="search" type="text" title="Search Telecomix Crypto Munitions Bureau [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/OpenBGPD" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/OpenBGPD" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="/w/index.php?title=OpenBGPD&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="/w/index.php?title=OpenBGPD&amp;oldid=896" title="Permanent link to this revision of the page">Permanent link</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="/w/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="http://creativecommons.org/licenses/publicdomain/"><img src="/w/skins/common/images/public-domain.png" alt='Public Domain' /></a></div>
			<ul id="f-list">
					<li id="lastmod"> This page was last modified on 5 July 2010, at 17:51.</li>
					<li id="viewcount">This page has been accessed 2,902 times.</li>
					<li id="copyright">Content is available under <a href="http://creativecommons.org/licenses/publicdomain/" class="external " title="http://creativecommons.org/licenses/publicdomain/">Public Domain</a>.</li>
					<li id="privacy"><a href="/wiki/Telecomix_Crypto_Munitions_Bureau:Privacy_policy" title="Telecomix Crypto Munitions Bureau:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="/wiki/Telecomix_Crypto_Munitions_Bureau:About" title="Telecomix Crypto Munitions Bureau:About">About Telecomix Crypto Munitions Bureau</a></li>
					<li id="disclaimer"><a href="/wiki/Telecomix_Crypto_Munitions_Bureau:General_disclaimer" title="Telecomix Crypto Munitions Bureau:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.164 secs. --></body></h
5
tml>

0

